/*
* FooBar - The Unobtrusive Notification Bar That Doesn\u2019t Suck!
* http://bit.ly/getfoobar
*
* Copyright 2012, Steven Usher & Brad Vincent
* http://themergency.com
*
* Date: 1 October 2012
* Version : 2.3
*/
(function(b){window.foobar=window.$foobar=b.foobar=function(){return a.init.apply(this,arguments)};b.foobarGoogleCallback=function(){a.googleApi.load.feeds()};var c={height:{bar:30,button:30},width:{left:"*",center:"50%",right:"*",button:"80px"},position:{ignoreOffsetMargin:false,bar:"top",button:"right",social:"left"},display:{type:"expanded",delay:0,speed:250,backgroundColor:"#6c9e00",border:"solid 3px #FFF",button:{type:"toggle",spacer:true,backgroundColor:null,border:null},theme:{bar:"triangle-arrow",navigation:null},easing:"swing",shadow:true,adjustPageHeight:true,rtl:false},cookie:{enabled:false,name:"foobar-state",duration:1,version:1},messages:[],message:{delay:4e3,fadeDelay:300,random:false,navigation:false,cssClass:null,scroll:{enabled:true,speed:50,delay:2e3},font:{family:"Verdana",size:"10pt",color:"White",decoration:null,shadow:null,weight:null},aFont:{family:"Verdana",size:"10pt",color:"LightYellow",decoration:"underline",shadow:null,weight:null,hover:{family:null,size:null,color:null,decoration:null,shadow:null,weight:null}}},rightHtml:null,leftHtml:null,social:{text:"Follow us",cssClass:null,font:{family:"Verdana",size:"10pt",color:"White",decoration:null,shadow:null,weight:null},profiles:[]},rss:{enabled:false,url:null,maxResults:5,linkText:"Read More",linkTarget:"_blank"},twitter:{enabled:false,user:null,maxTweets:5},events:{expanding:null,collapsing:null,setExpanded:null,setCollapsed:null,preRender:null,postRender:null},ssl:false},a={settings:{},elements:{main:{wrapper:null,shadow:null,container:null,row:null},left:{container:null,inner:null},center:{container:null,inner:null},right:{container:null,inner:null},message:null,open:{button:null,container:null},close:{button:null,container:null,spacer:null},prev:null,next:null},_internals:{state:{firstrun:true,initialized:false,open:false,top:false,busy:false},offsetMargin:0,actualHeight:0,shadowHeight:5,tabShadowHeight:11},utils:{isNotNullOrEmpty:function(a){return typeof a=="string"&&a!==null&&a!==""},preventDefault:function(a){typeof a!="undefined"&&a!==null&&typeof a.preventDefault=="function"&&a.preventDefault()},applyFont:function(d,e){var f={family:null,size:null,color:null,decoration:null,shadow:null},c=b.extend({},f,e);a.utils.isNotNullOrEmpty(c.family)&&d.css("font-family",c.family);a.utils.isNotNullOrEmpty(c.size)&&d.css("font-size",c.size);a.utils.isNotNullOrEmpty(c.color)&&d.css("color",c.color);a.utils.isNotNullOrEmpty(c.decoration)&&d.css("text-decoration",c.decoration);a.utils.isNotNullOrEmpty(c.shadow)&&d.css("text-shadow",c.shadow);a.utils.isNotNullOrEmpty(c.weight)&&d.css("font-weight",c.weight)},setCookie:function(d){var c="";if(a.settings.cookie.duration){var b=new Date;b.setTime(b.getTime()+a.settings.cookie.duration*24*60*60*1e3);c="; expires="+b.toGMTString()}document.cookie=a.settings.cookie.name+"="+d+"|"+a.settings.cookie.version+c+"; path=/"},getCookie:function(){for(var d=a.settings.cookie.name+"=",e=document.cookie.split(";"),c=0;c<e.length;c++){var b=e[c];while(b.charAt(0)==" ")b=b.substring(1,b.length);if(b.indexOf(d)===0)return a.utils.parse.cookie(b.substring(d.length,b.length))}return null},deleteCookie:function(){var b=new Date;b.setTime(b.getTime()+-1*24*60*60*1e3);document.cookie=a.settings.cookie.name+"=; expires="+b.toGMTString()+"; path=/"},formatTweetHtml:function(b){var c=a.settings.twitter.user+": ";if(b.indexOf(c)===0)b=b.substring(c.length);b=" "+b;b=b.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(e,a,c,f,d){var b=c.match(/w/)?"http://":"";return'<a class="twtr-hyperlink" target="_blank" href="'+b+a+'">'+a+"</a>"+d});b=b.replace(/\B[@\uff20]([a-zA-Z0-9_]{1,20})/g,function(b,a){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+a+'">@'+a+"</a>"});b=b.replace(/\B[@\uff20]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(b,a){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+a+'">@'+a+"</a>"});b=b.replace(/(^|\s+)#(\w+)/gi,function(c,b,a){return b+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+a+'">#'+a+"</a>"});return b},raise:function(c){try{if(b.isFunction(c)){var d=Array.prototype.slice.call(arguments);d.shift();c.apply(a,d)}}catch(e){console.error(e)}},parse:{cookie:function(b){if(typeof b==="string")if(b.indexOf("|")==-1)return{expanded:a.utils.parse.bool(b,false),version:-1};else{var c=b.split("|");if(c.length==2)return{expanded:a.utils.parse.bool(c[0],false),version:a.utils.parse.integer(c[1],-1)}}return null},bool:function(b,a){a=a||false;switch(typeof b){case"string":switch(b.toLowerCase()){case"1":case"true":return true;case"0":case"false":return false;default:return a}case"number":switch(b){case 1:return true;case 0:return false;default:return a}case"boolean":return b;default:return a}},integer:function(b,a){a=a||null;switch(typeof b){case"string":var c=parseInt(b);return isNaN(c)?a:c;case"number":return b;default:return a}},html:function(c){if(!a.utils.isNotNullOrEmpty(c))return c;if(c&&c.match("{{include:(.*?)}}")){var e=new RegExp("{{include:(.*?)}}"),d=e.exec(c);while(d!==null){var f=b(d[1]).html();c=c.replace(d[0],f);d=e.exec(c)}}return c},width:function(a){return typeof a!="undefined"&&a!=null&&a!="*"&&a!="100%"?{width:a}:{width:"auto"}},borderWidth:function(d,e){var c=b("<div></div>").css({border:d,position:"absolute",visibility:"hidden"}).appendTo("body"),f=a.utils.parse.integer(c.css("border-top-width"),e);c.remove();return f}},checks:{isMultipart:function(a,b){return typeof a!="undefined"&&a!==null&&a.length>0&&a.indexOf(b)!=-1},hasProperties:function(a){if(typeof a!=="object")return false;for(var b in a)if(a.hasOwnProperty(b))return true;return false},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"}},property:{"get":function(c,b){try{if(a.utils.checks.isMultipart(b,".")){var d=b.substring(0,b.indexOf(".")),e=b.substring(b.indexOf(".")+1);c[d]=c[d]||{};return a.utils.property.get(c[d],e)}return c[b]}catch(f){console.error(f);return null}},"set":function(c,b,e){try{if(a.utils.checks.isMultipart(b,".")){var d=b.substring(0,b.indexOf(".")),f=b.substring(b.indexOf(".")+1);c[d]=c[d]||{};a.utils.property.set(c[d],f,e)}else c[b]=e}catch(g){console.error(g)}},merge:function(e,d){try{for(var c in d)if(d.hasOwnProperty(c))if(a.utils.checks.hasProperties(d[c])&&!a.utils.checks.isArray(d[c])){e[c]=e[c]||{};a.utils.property.merge(e[c],d[c])}else if(a.utils.checks.isArray(d[c])){e[c]=[];b.extend(true,e[c],d[c])}else e[c]=d[c]}catch(f){console.error(f)}}}},messageLoop:{id:null,paused:false,sizes:[],index:{current:-1,next:0,_random:function(){if(a.settings.messages.length<=1)return 0;var c=0,d=a.settings.messages.length-1,b=Math.floor(Math.random()*(d-c+1)+c);return b==a.messageLoop.index.current?a.messageLoop.index._random():b},_setCurrent:function(){if(a.settings.message.random&&a.messageLoop.index.current==-1&&a.settings.messages.length>1)a.messageLoop.index.current=a.messageLoop.index._random();else a.messageLoop.index.current=a.messageLoop.index.next},_setNext:function(){if(a.settings.message.random&&a.settings.messages.length>1)a.messageLoop.index.next=a.messageLoop.index._random();else if(a.messageLoop.index.next>=a.settings.messages.length-1)a.messageLoop.index.next=0;else a.messageLoop.index.next++}},create:function(){if(b(".foobar-message-wrapper").length!==a.settings.messages.length||a.messageLoop.sizes.length!=a.settings.messages.length){a.elements.message.empty();for(var c=0;c<a.settings.messages.length;c++){var d=b("<div></div>").attr("id","foobar-message-"+c).addClass("foobar-message-wrapper").css({position:"absolute",display:"inline-block",visibility:"hidden"}).html(a.utils.parse.html(a.settings.messages[c]));a.elements.message.append(d);a.messageLoop._style(d);a.messageLoop.sizes[c]={width:d.width(),height:d.height()}}}a.elements.message.children().hide();a.elements.center.container.unbind("mouseenter mouseleave");a.elements.prev.add(a.elements.next).unbind("click");if(a.settings.messages.length>1){a.elements.center.container.hover(a.messageLoop.pause,a.messageLoop.resume);a.elements.prev.click(a.messageLoop.prev);a.elements.next.click(a.messageLoop.next)}},start:function(c){c=c||false;if(!a._internals.state.open||a.settings.messages.length===0||a.messageLoop.index.current==a.messageLoop.index.next)return;if(!c&&a.messageLoop.paused){a.messageLoop.id=setTimeout(a.messageLoop.start,a.settings.message.delay);return}a.messageLoop.stop();a.messageLoop.index._setCurrent();a.messageLoop.create();var f=a.elements.center.container.width(),d=a.messageLoop.sizes[a.messageLoop.index.current].width,e=a.messageLoop.sizes[a.messageLoop.index.current].height;b("#foobar-message-"+a.messageLoop.index.current).css({position:"static",display:"inline-block",visibility:"visible",opacity:100,"margin-left":0,width:d,"min-height":e,"max-height":a.settings.height.bar});a.elements.message.css({"min-height":e,"max-height":a.settings.height.bar});a.messageLoop.index._setNext();if(d>f)a.messageLoop._scroll(d-f,c);else if(a.messageLoop.index.next!=a.messageLoop.index.current)a.messageLoop.id=setTimeout(function(){a.messageLoop._fade(c)},a.settings.message.delay)},stop:function(){typeof a.messageLoop.id!="undefined"&&a.messageLoop.id!==null&&clearTimeout(a.messageLoop.id);b("#foobar-message-"+a.messageLoop.index.current).stop(false,false).css("margin-left",0);a.messageLoop.id=null},pause:function(){a.settings.message.navigation&&!a.messageLoop.paused&&a.elements.prev.add(a.elements.next).stop(false,true).fadeIn("fast");a.messageLoop.paused=true},resume:function(){a.settings.message.navigation&&a.messageLoop.paused&&a.elements.prev.add(a.elements.next).stop(false,true).fadeOut("fast");a.messageLoop.paused=false},next:function(){if(a.settings.messages.length>1){a.messageLoop.stop();b("#foobar-message-"+a.messageLoop.index.current).stop(false,false).css("margin-left",0);var c=a.messageLoop.index.current+1;c=c<=a.settings.messages.length-1?c:0;a.messageLoop.index.next=c;a.messageLoop.start(true)}},prev:function(){if(a.settings.messages.length>1){a.messageLoop.stop();b("#foobar-message-"+a.messageLoop.index.current).stop(false,false).css("margin-left",0);var c=a.messageLoop.index.current-1;c=c>=0?c:a.settings.messages.length-1;a.messageLoop.index.next=c;a.messageLoop.start(true)}},_scroll:function(c,d){var f=b("#foobar-message-"+a.messageLoop.index.current).css("margin-left",a.settings.display.rtl?-c:0);if(a.settings.message.scroll.enabled){var g=Math.round(c/a.settings.message.scroll.speed)*1e3,e={"margin-left":a.settings.display.rtl?0:-c};f.delay(a.settings.message.scroll.delay).animate(e,g,"linear",function(){if(a.messageLoop.index.next==a.messageLoop.index.current)a.messageLoop.id=setTimeout(function(){a.messageLoop._reset(d)},a.settings.message.delay);else a.messageLoop.id=setTimeout(function(){a.messageLoop._fade(d)},a.settings.message.delay)})}},_reset:function(c){c=c||false;if(a.messageLoop.paused){a.messageLoop.id=setTimeout(function(){a.messageLoop._reset(c)},a.settings.message.delay);return}b("#foobar-message-"+a.messageLoop.index.current).stop(false,false).css("margin-left",0);a.messageLoop.index.current=-1;a.messageLoop.start(c)},_fade:function(c){c=c||false;if(a.messageLoop.paused){a.messageLoop.id=setTimeout(function(){a.messageLoop._fade(c)},a.settings.message.delay);return}b("#foobar-message-"+a.messageLoop.index.current).animate({opacity:0},a.settings.message.fadeDelay,function(){a.messageLoop.start(c)})},_style:function(c){if(a.utils.isNotNullOrEmpty(a.settings.message.cssClass))c.addClass(a.settings.message.cssClass);else{a.utils.applyFont(c,a.settings.message.font);var d=c.find("a");a.utils.applyFont(d,a.settings.message.aFont);d.unbind("mouseenter mouseleave").bind({mouseenter:function(){a.utils.applyFont(b(this),a.settings.message.aFont.hover)},mouseleave:function(){a.utils.applyFont(b(this),a.settings.message.aFont)}})}}},googleApi:{check:{core:function(){return typeof google!="undefined"},feeds:function(){return a.googleApi.check.core()&&typeof google.feeds!="undefined"}},load:{core:function(){var c=a.settings.ssl?"https":"http";b("<script><\/script>").attr("type","text/javascript").attr("src",c+"://www.google.com/jsapi?callback=jQuery.foobarGoogleCallback").appendTo("head")},feeds:function(){google.load("feeds","1",{callback:a.googleApi.fetch.messages})}},fetch:{messages:function(){a.settings.twitter.enabled&&a.utils.isNotNullOrEmpty(a.settings.twitter.user)&&a.googleApi.fetch.twitter();a.settings.rss.enabled&&a.utils.isNotNullOrEmpty(a.settings.rss.url)&&a.googleApi.fetch.rss()},twitter:function(){var c="http://api.twitter.com/1/statuses/user_timeline.rss?trim_user=0&screen_name="+a.settings.twitter.user,b=new google.feeds.Feed(c);b.setNumEntries(a.settings.twitter.maxTweets);b.load(function(b){a.messageLoop.stop();if(!b.error)for(var c=0;c<b.feed.entries.length;c++){var d=a.utils.formatTweetHtml(b.feed.entries[c].title);a.settings.messages.push(d)}else console.error(b.error.message);a.elements.message.stop(false,true).css({left:0,opacity:100});a.messageLoop.start(true)})},rss:function(){var b=new google.feeds.Feed(a.settings.rss.url);b.setNumEntries(a.settings.rss.maxResults);b.load(function(b){a.messageLoop.stop();if(!b.error)for(var c=0;c<b.feed.entries.length;c++){var d=b.feed.entries[c].title;if(a.utils.isNotNullOrEmpty(a.settings.rss.linkText))d+=' <a href="'+b.feed.entries[c].link+'" target="'+a.settings.rss.linkTarget+'">'+a.settings.rss.linkText+"</a>";a.settings.messages.push(d)}else console.error(b.error.message);a.elements.message.stop(false,true).css({left:0,opacity:100});a.messageLoop.start(true)})}}},init:function(d,e,f){if(typeof d==="string")switch(d){case"open":a.expand(null);break;case"close":a.collapse(null);break;case"toggle":a.toggle();break;case"destroy":a.destroy();break;case"prev":a.messageLoop.prev();break;case"next":a.messageLoop.next();break;case"start":a.messageLoop.start();break;case"stop":a.messageLoop.stop();break;case"option":switch(arguments.length){case 3:a.option.set(e,f);break;case 2:if(typeof e==="string")return a.option.get(e);a.option.set(e,null)}break;default:a.render(b.extend(true,{},c,{messages:[d]}))}else a.render(b.extend(true,{},c,d));return false},create:function(){if(b(".foobar-wrapper").length===0){a.elements.main.wrapper=b("<div></div>").addClass("foobar-wrapper");a.elements.main.container=b("<table></table>").attr({cellpadding:0,cellspacing:0}).addClass("foobar-container");a.elements.main.row=b("<tr></tr>").addClass("foobar-container-row");a.elements.main.shadow=b("<div></div>").addClass("foobar-shadow");a.elements.left.container=b("<td></td>").addClass("foobar-container-left");a.elements.left.inner=b("<div></div>").addClass("foobar-container-inner");a.elements.center.container=b("<td></td>").addClass("foobar-container-center");a.elements.center.inner=b("<div></div>").addClass("foobar-container-inner");a.elements.right.container=b("<td></td>").addClass("foobar-container-right");a.elements.right.inner=b("<div></div>").addClass("foobar-container-inner");a.elements.prev=b("<div></div>").addClass("foobar-prev-button");a.elements.next=b("<div></div>").addClass("foobar-next-button");a.elements.message=b("<div></div>").addClass("foobar-message");a.elements.close.spacer=b("<td></td>").addClass("foobar-close-button-spacer");a.elements.close.container=b("<td></td>").addClass("foobar-close-button-container");a.elements.close.button=b("<span></span>").addClass("foobar-close-button");a.elements.open.container=b("<div></div>").addClass("foobar-open-button-container");a.elements.open.button=b("<span></span>").addClass("foobar-open-button");a.elements.main.wrapper.append(a.elements.main.container.append(a.elements.main.row)).append(a.elements.main.shadow).append(a.elements.open.container);a.elements.main.row.append(a.elements.left.container.append(a.elements.left.inner)).append(a.elements.center.container.append(a.elements.center.inner.append(a.elements.message).append(a.elements.prev).append(a.elements.next))).append(a.elements.right.container.append(a.elements.right.inner)).append(a.elements.close.container);a.elements.close.container.append(a.elements.close.button);a.elements.open.container.append(a.elements.open.button);b("body").prepend(a.elements.main.wrapper)}else{a.elements.main.wrapper=b(".foobar-wrapper");a.elements.main.container=b(".foobar-container");a.elements.main.row=b(".foobar-container-row");a.elements.main.shadow=b(".foobar-shadow");a.elements.left.container=b(".foobar-container-left");a.elements.left.inner=b(".foobar-container-left .foobar-container-inner");a.elements.center.container=b(".foobar-container-center");a.elements.center.inner=b(".foobar-container-center .foobar-container-inner");a.elements.right.container=b(".foobar-container-right");a.elements.right.inner=b(".foobar-container-right .foobar-container-inner");a.elements.prev=b(".foobar-prev-button");a.elements.next=b(".foobar-next-button");a.elements.message=b(".foobar-message");a.elements.close.spacer=b(".foobar-close-button-spacer");a.elements.close.container=b(".foobar-close-button-container");a.elements.close.button=b(".foobar-close-button");a.elements.open.container=b(".foobar-open-button-container");a.elements.open.button=b(".foobar-open-button")}a._internals.state.initialized=true},_render:{allow:function(){var b=a.utils.getCookie();if(b!=null&&b.version==a.settings.cookie.version&&a.settings.cookie.enabled&&!b.expanded&&a.settings.display.button.type=="close"){a.destroy();return false}else b!=null&&b.version!=a.settings.cookie.version&&a.settings.cookie.enabled&&!b.expanded&&a.settings.display.button.type=="close"&&a.utils.deleteCookie();return true},init:function(){a._internals.state.top=a.settings.position.bar!="bottom";if(!a._internals.state.initialized){a._internals.offsetMargin=a.utils.parse.integer(b("html").css(a._internals.state.top?"margin-top":"margin-bottom"),0);a._internals.offsetMargin=a.settings.position.ignoreOffsetMargin?0:a._internals.offsetMargin;a.create()}else a.elements.left.inner.add(a.elements.right.inner).empty();if(a.settings.display.button.type=="close")a.elements.open.container.addClass("hidden");else a.elements.open.container.removeClass("hidden");a.elements.main.container.show()},theme:function(){if(a.settings.display.theme.navigation==null)a.settings.display.theme.navigation=a.settings.display.theme.bar;a.elements.main.wrapper.removeClass().addClass(a.settings.display.theme.bar).addClass("foobar-wrapper");a.elements.prev.removeClass().addClass(a.settings.display.theme.navigation).addClass("foobar-prev-button");a.elements.next.removeClass().addClass(a.settings.display.theme.navigation).addClass("foobar-next-button")},backgroundColor:function(){if(a.settings.display.button.backgroundColor==null)a.settings.display.button.backgroundColor=a.settings.display.backgroundColor;a.elements.main.container.add(a.elements.prev).add(a.elements.next).add(a.elements.open.button).css({"background-color":a.settings.display.backgroundColor});a.elements.open.button.css({"background-color":a.settings.display.button.backgroundColor})},shadow:function(){if(a.settings.display.shadow)a.elements.main.wrapper.addClass("shadow");else a.elements.main.wrapper.removeClass("shadow");a._internals.shadowHeight=a.elements.main.shadow.height()},border:function(){if(a.settings.display.button.border==null)a.settings.display.button.border=a.settings.display.border;a.elements.main.container.css("border","none").css(a._internals.state.top?"border-bottom":"border-top",a.settings.display.border);a.elements.open.button.css("border",a.settings.display.button.border).css(a._internals.state.top?"border-top":"border-bottom","none")},height:function(){a.elements.open.container.height(a.settings.height.button+a._internals.tabShadowHeight);a.elements.open.button.height(a.settings.height.button);a.elements.main.container.add(a.elements.close.button).add(a.elements.prev).add(a.elements.next).add(a.elements.left.container).add(a.elements.center.container).add(a.elements.right.container).height(a.settings.height.bar);a.elements.left.inner.add(a.elements.center.inner).add(a.elements.right.inner).css("max-height",a.settings.height.bar);var b=a.utils.parse.borderWidth(a.settings.display.border,0);a._internals.actualHeight=a.settings.height.bar+a._internals.shadowHeight+b;a.elements.main.wrapper.height(a._internals.actualHeight);a.elements.prev.add(a.elements.next).css("margin-top",-(a.settings.height.bar/2))},position:function(){a.elements.main.wrapper.removeClass("fb-inline fb-top fb-bottom").addClass("fb-"+a.settings.position.bar);if(!a._internals.state.top)a.elements.main.container.before(a.elements.main.shadow);else a.elements.main.container.after(a.elements.main.shadow);a.elements.main.wrapper.add(a.elements.open.container).css(a._internals.state.top?"bottom":"top","auto").css(a._internals.state.top?"top":"bottom",a.settings.position.bar=="inline"?0:a._internals.offsetMargin);var b=a.utils.parse.borderWidth(a.settings.display.button.border,0),c=-(a.elements.open.button.width()/2+b);a.elements.open.button.css("margin-left",c);a.elements.close.spacer.detach();a.elements.left.container.css(a.utils.parse.width(a.settings.width.left));a.elements.center.container.css(a.utils.parse.width(a.settings.width.center));a.elements.right.container.css(a.utils.parse.width(a.settings.width.right));a.elements.close.container.add(a.elements.close.spacer).add(a.elements.open.container).css(a.utils.parse.width(a.settings.width.button));if(a.settings.position.button=="right"){a.settings.display.button.spacer&&a.elements.close.spacer.insertBefore(a.elements.center.container);a.elements.close.container.insertAfter(a.elements.right.container).show();a.elements.open.container.css({left:"auto",right:"0px"}).show()}else if(a.settings.position.button=="left"){a.settings.display.button.spacer&&a.elements.close.spacer.insertAfter(a.elements.center.container);a.elements.close.container.insertBefore(a.elements.left.container).show();a.elements.open.container.css({right:"auto",left:"0px"}).show()}else{a.elements.close.container.hide();a.elements.open.container.hide()}},social:function(){if(a.settings.position.social=="left"||a.settings.position.social=="right")if(a.settings.social.profiles.length>0){var c=b(".foobar-social").length>0?b(".foobar-social"):b("<ul></ul>").addClass("foobar-social");c.empty();if(a.utils.isNotNullOrEmpty(a.settings.social.text)){var d=b("<li></li>").addClass("foobar-social-text").text(a.settings.social.text).css({height:a.settings.height.bar,"line-height":a.settings.height.bar+"px"});if(a.utils.isNotNullOrEmpty(a.settings.social.cssClass))d.addClass(a.settings.social.cssClass);else a.utils.applyFont(d,a.settings.social.font);c.append(d)}var e={name:null,url:null,image:null,target:"_blank"};b.each(a.settings.social.profiles,function(h,g){var d=b.extend({},e,g);if(d.name!==null&&d.url!==null&&d.image!==null){var f=b('<a rel="nofollow"></a>').attr("href",d.url).attr("title",d.name).attr("target",d.target).css({background:"url('"+d.image+"') no-repeat center center",height:a.settings.height.bar});c.append(b("<li></li>").css({height:a.settings.height.bar}).append(f))}});if(a.settings.position.social=="right"){c.css("float","right");a.elements.right.inner.append(c)}else if(a.settings.position.social=="left"){c.css("float","left");a.elements.left.inner.append(c)}c.children("li").css({"float":a.settings.display.rtl?"right":"left","text-align":a.settings.display.rtl?"right":"left"})}else b(".foobar-social").remove();else b(".foobar-social").remove()},customHtml:function(){a.utils.isNotNullOrEmpty(a.settings.rightHtml)&&a.elements.right.inner.append(a.utils.parse.html(a.settings.rightHtml));a.utils.isNotNullOrEmpty(a.settings.leftHtml)&&a.elements.left.inner.append(a.utils.parse.html(a.settings.leftHtml))},cookie:function(){var c=a.utils.getCookie();if(c===null||c.version!=a.settings.cookie.version||!a.settings.cookie.enabled){(!a.settings.cookie.enabled||c!==null&&c.version!=a.settings.cookie.version)&&a.utils.deleteCookie();switch(a.settings.display.type){case"onscroll":a.setCollapsed();b(window).one("scroll",function(){setTimeout(a.expand,a.settings.display.delay)});break;case"delayed":a.setCollapsed();setTimeout(a.expand,a.settings.display.delay);break;case"collapsed":a.setCollapsed();break;case"expanded":default:a.setExpanded()}}else c.expanded?a.setExpanded():a.setCollapsed()},finalise:function(){if(a.settings.display.button.type=="close"){a.elements.open.button.unbind().hide();a.elements.close.button.unbind().click(function(b){a.collapse(b,a.destroy)})}else{a.elements.open.button.unbind().click(a.expand);a.elements.close.button.unbind().click(a.collapse)}b(".foobar-message-wrapper").remove();a.messageLoop.paused=false;a.messageLoop.index.next=0;a.messageLoop.index.current=-1;var c=true,d=false;if(a.settings.twitter.enabled&&a.utils.isNotNullOrEmpty(a.settings.twitter.user)){c=false;if(a.googleApi.check.core()&&a.googleApi.check.feeds())a.googleApi.fetch.twitter();else d=true}if(a.settings.rss.enabled&&a.utils.isNotNullOrEmpty(a.settings.rss.url)){c=false;if(a.googleApi.check.core()&&a.googleApi.check.feeds())a.googleApi.fetch.rss();else d=true}if(d)if(a.googleApi.check.feeds())a.googleApi.load.feeds();else a.googleApi.load.core();if(c){a.elements.message.stop(true,false).css("opacity",100);a.messageLoop.start()}a._internals.state.firstrun=false;var e=b.browser;if(e.msie&&parseInt(e.version)==8){var f=a.elements.main.container.css("display");a.elements.main.container.css({visibility:"hidden",display:"inline-table"});a.elements.main.shadow.css("visibility","hidden");setTimeout(function(){a.elements.main.container.css({visibility:"visible",display:f});a.elements.main.shadow.css("visibility","visible")},0)}}},render:function(b){a.settings=b;if(a._render.allow()){a.utils.raise(a.settings.events.preRender,a.settings);a._render.init();a._render.theme();a._render.backgroundColor();a._render.shadow();a._render.border();a._render.height();a._render.position();a._render.social();a._render.customHtml();a._render.cookie();a._render.finalise();a.utils.raise(a.settings.events.postRender,a.settings)}},destroy:function(){if(!a._internals.state.initialized)return;if(a.settings.display.adjustPageHeight){var c={"margin-top":0,"margin-bottom":0};if(a.settings.position.bar!="inline")c[a._internals.state.top?"margin-top":"margin-bottom"]=a._internals.offsetMargin<=0?0:a._internals.offsetMargin-a.settings.height.bar;else c[a._internals.state.top?"margin-top":"margin-bottom"]=a._internals.offsetMargin;b("html").css(c)}a.elements.main.wrapper.remove();a._internals.state.initialized=false},toggle:function(){if(!a._internals.state.initialized)return;if(a._internals.state.open)a.collapse(null);else a.expand(null)},expand:function(c){a.utils.preventDefault(c);if(!a._internals.state.initialized||a._internals.state.open||a._internals.state.busy)return;a._internals.state.busy=true;a.elements.open.button.stop(false,true).animate({height:0},a.settings.display.speed);a.elements.open.container.stop(false,true).animate({height:0},a.settings.display.speed,function(){if(a.settings.display.adjustPageHeight){var c={};if(a.settings.position.bar!="inline"){c[a._internals.state.top?"margin-bottom":"margin-top"]=0;var d={};d[a._internals.state.top?"margin-top":"margin-bottom"]="+="+a.settings.height.bar;b("html").css(c).stop(false,true).animate(d,a.settings.display.speed)}else{c[a._internals.state.top?"margin-bottom":"margin-top"]=0;c[a._internals.state.top?"margin-top":"margin-bottom"]=a._internals.offsetMargin;b("html").css(c)}}a.utils.raise(a.settings.events.expanding,a.settings);a.elements.main.container.show();a.elements.main.wrapper.stop(false,true).animate({height:a._internals.actualHeight},a.settings.display.speed,a.settings.display.easing,function(){a.elements.main.wrapper.focus();a._internals.state.open=true;a.messageLoop.start(true);a._internals.state.busy=false})});a.settings.cookie.enabled&&a.utils.setCookie(true)},collapse:function(f,e){a.utils.preventDefault(f);if(!a._internals.state.initialized||!a._internals.state.open||a._internals.state.busy)return;a._internals.state.busy=true;a.messageLoop.stop();if(a.settings.display.adjustPageHeight){var c={};if(a.settings.position.bar!="inline"){c[a._internals.state.top?"margin-bottom":"margin-top"]=0;var d={};d[a._internals.state.top?"margin-top":"margin-bottom"]="-="+a.settings.height.bar;b("html").css(c).stop(false,true).animate(d,a.settings.display.speed)}else{c[a._internals.state.top?"margin-bottom":"margin-top"]=0;c[a._internals.state.top?"margin-top":"margin-bottom"]=a._internals.offsetMargin;b("html").css(c)}}a.utils.raise(a.settings.events.collapsing,a.settings);a.elements.main.wrapper.stop(false,true).animate({height:a._internals.shadowHeight},a.settings.display.speed,function(){a.elements.main.container.hide();a.elements.open.container.stop(false,true).animate({height:a.settings.height.button+a._internals.tabShadowHeight},a.settings.display.speed,a.settings.display.easing);a.elements.open.button.stop(false,true).animate({height:a.settings.height.button},a.settings.display.speed,a.settings.display.easing,function(){b.isFunction(e)&&e.call();a._internals.state.busy=false})});a._internals.state.open=false;a.settings.cookie.enabled&&a.utils.setCookie(false)},setExpanded:function(){if(!a._internals.state.initialized||a._internals.state.busy)return;a.elements.main.wrapper.height(a._internals.actualHeight);a.elements.main.container.show();a.elements.open.container.add(a.elements.open.button).height(0);if(a.settings.display.adjustPageHeight&&a.settings.position.bar!="inline"){var c={"margin-top":0,"margin-bottom":0};c[a._internals.state.top?"margin-top":"margin-bottom"]=a._internals.offsetMargin<=0?a.settings.height.bar:a._internals.offsetMargin+a.settings.height.bar;b("html").css(c)}(a._internals.state.firstrun||!a._internals.state.open)&&a.utils.raise(a.settings.events.setExpanded,a.settings);a._internals.state.open=true;a.settings.cookie.enabled&&a.utils.setCookie(true)},setCollapsed:function(){if(!a._internals.state.initialized||a._internals.state.busy)return;a.elements.main.wrapper.height(a._internals.shadowHeight);a.elements.main.container.hide();a.elements.open.container.height(a.settings.height.button+a._internals.tabShadowHeight);a.elements.open.button.height(a.settings.height.button);if(a.settings.display.adjustPageHeight&&a.settings.position.bar!="inline"){var c={"margin-top":0,"margin-bottom":0};c[a._internals.state.top?"margin-top":"margin-bottom"]=a._internals.offsetMargin;b("html").css(c)}(a._internals.state.firstrun||a._internals.state.open)&&a.utils.raise(a.settings.events.setCollapsed,a.settings);a._internals.state.open=false;a.settings.cookie.enabled&&a.utils.setCookie(false)},option:{"get":function(b){return a.utils.property.get(a.settings,b)},"set":function(b,c){if(typeof b==="string")a.utils.property.set(a.settings,b,c);else a.utils.property.merge(a.settings,b);a.render(a.settings)}}}})(jQuery);var google,console;if(!window.console)console={};console.log=console.log||function(){};console.warn=console.warn||function(){};console.error=console.error||function(){};console.info=console.info||function(){};var JSON;if(!JSON)JSON={};JSON.stringify=JSON.stringify||function(){}